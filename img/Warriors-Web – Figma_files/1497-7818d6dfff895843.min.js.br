"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2976e3e3-485c-59bd-a1d7-2d2f47b76c3d")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1497],{195971:(e,t,r)=>{r.d(t,{Al:()=>E,dT:()=>h,lX:()=>_,nt:()=>T,pI:()=>b});var a=r(411855),s=r(188507),n=r(531664),i=r(358145),l=r(286640),d=r(99506),o=r(162707),c=r(479296),u=r(860178),p=r(243987);let m=e=>`SAVED_CART::${e}`;function _({teamId:e,userId:t}){if(!t)return null;let r=A(t);return(null==r?void 0:r.teamId)===e?r:null}function b({loadingPaidEditors:e,teamId:t,teamName:r,setTeamName:l,collaborators:c,setCollaborators:m}){let _=(0,u.iZ)(),b=(0,s.d4)(e=>(t?e.teamUserByTeamId[t]:{})||{}),E=(0,s.d4)(e=>e.payment.numDesignEditors),g=(0,s.d4)(e=>e.payment.numWhiteboardEditors),T=(0,s.d4)(e=>e.payment.editorStatusChanges),C=(0,i.Z)(e),S=(0,p.BR)(b,_),y=(0,p.O1)(E,(0,p.Ky)(S,T,d._Y.DESIGN)),v=(0,p.O1)(g,(0,p.Ky)(S,T,d._Y.WHITEBOARD)),f=(0,a.useCallback)(()=>{let e=A(null==_?void 0:_.id);if(!e)return null;let{createdAt:t,updatedAt:r,...a}=e;return a},[null==_?void 0:_.id]);(0,a.useEffect)(()=>{let a=f(),s=null!==t||r?r:null==a?void 0:a.newTeamName,i=null===t&&!c||(0,n.c2)(c,o.k)?(null==a?void 0:a.newCollaborators)??o.k:c,d={teamId:t,editorStatusChanges:T,numEmptyDesignSeats:y,numEmptyWhiteboardSeats:v,newTeamName:s,newCollaborators:i,is3DS:null==a?void 0:a.is3DS};!e&&_&&((0,n.he)(a,d)||h(_.id,d),C&&(l&&s!==r&&l(s||""),m&&!(0,n.c2)(c,i)&&m(i||o.k)))},[e,C,_,t,T,y,v,f,r,l,c,m])}let h=(0,c.D)((e,t)=>{var r;try{let a=new Date().toISOString(),s={...t,createdAt:a,updatedAt:a};null==(r=(0,l.TQ)())||r.setItem(m(e),g(s))}catch(e){console.error("Failed to save cart state to Local Storage")}});function E(e){var t;if(e)try{null==(t=(0,l.TQ)())||t.removeItem(m(e))}catch(e){}}let g=e=>JSON.stringify(e),A=e=>{var t;if(!e)return null;try{let r=null==(t=(0,l.TQ)())?void 0:t.getItem(m(e));if(r)return JSON.parse(r);return null}catch(e){return null}};function T(e,t){let r=t.map(e=>e.id),a=e=>(null==e?void 0:e.filter(e=>r.includes(e)))??[];return{upgrade:{design:a(e.upgrade.design),slides:a(e.upgrade.slides),sites:a(e.upgrade.sites),whiteboard:a(e.upgrade.whiteboard)},downgrade:{design:a(e.downgrade.design),slides:a(e.downgrade.slides),sites:a(e.downgrade.sites),whiteboard:a(e.downgrade.whiteboard)}}}},257512:(e,t,r)=>{r.d(t,{$7:()=>y,Mt:()=>D,Ud:()=>v});var a=r(411855),s=r(188507),n=r(776250),i=r(367253),l=r(358145),d=r(966712),o=r(27087),c=r(881388),u=r(939863),p=r(182976),m=r(995852),_=r(229403),b=r(99506),h=r(622139),E=r(479296),g=r(738269),A=r(195971),T=r(860178),C=r(336599),S=r(243987);function y(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.payment);function r(r){e(m.Az({numWhiteboardEditors:t.numWhiteboardEditors+r}))}function a(r){e(m.js({numDesignEditors:t.numDesignEditors+r}))}return{increment:function(e,t){(0,i.nD)(t)||("whiteboard"===e?r(1):a(1))},decrement:function(e,t){(0,i.nD)(t)||("whiteboard"===e?r(-1):a(-1))}}}let v=(0,E.D)(({teamId:e,jamboardPromoCodeId:t,canSeeBillingAddressExp:r})=>{let p=(0,s.wA)(),E=(0,s.d4)(e=>e.loadingState),y=(0,s.d4)(t=>e?t.teamUserByTeamId[e]:null),v=(0,s.d4)(e=>e.selectedView),N=(0,T.iZ)(),[R,x]=(0,a.useState)(!0),O=(0,l.Z)(e),w=_.Xw.loadingKeyForPayload({teamId:e}),I=(0,C.GH)(E,w),k=(0,d.DC)();(0,a.useEffect)(()=>{p(_.Xw({teamId:e}))},[p,e]);let P=function(){let e=(0,s.wA)();return(0,a.useCallback)(t=>{(0,n.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(m.eK(t))},[e])}();return(0,a.useEffect)(()=>{async function a(t){var r;try{let r=await o.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});p(m.i({taxes:r.data.meta.estimate}))}catch(t){let e=(0,u.Jv)(t);e&&(null==(r=null==t?void 0:t.data)?void 0:r.reason)==="PROMOTION_CODE_ID_ERROR"?p(m.Qg({error:e,errorCode:"PROMOTION_CODE_ID_ERROR"})):p(c.s.error((0,u.t)("payments.errors.estimate_calculation_error"))),p(g.$T({...v,paymentStep:h.tn.PAYMENT_AND_ADDRESS}))}x(!1)}if(void 0===O||O===e||R||(D(p),x(!0)),(!e||I)&&R){let n=(0,S.BR)(y,N),l=Object.entries(n).map(([e,t])=>{if((0,i.nD)(t.email||""))return e}).filter(e=>!!e);p(m.M2({figmaEmailTeamUsers:l}));let d=(0,A.lX)({teamId:e,userId:null==N?void 0:N.id});if(d){d.editorStatusChanges=(0,A.nt)(d.editorStatusChanges,n);let i=(0,S.Ky)(n,d.editorStatusChanges,b._Y.DESIGN),o=(0,S.Ky)(n,d.editorStatusChanges,b._Y.WHITEBOARD),c=i+d.numEmptyDesignSeats,u=o+d.numEmptyWhiteboardSeats;if(P({numDesignEditors:c,numWhiteboardEditors:u,editorStatusChanges:d.editorStatusChanges,teamId:e,updatedAt:d.updatedAt}),k){var s;let e=(s=k.billing_period,h.tY[h.tY[s]]),n=r?{billing_address:k.billing_address,shipping_address:k.shipping_address||k.billing_address}:null;p(m.Lo({billingPeriod:e})),p(m.$h({vatGstId:k.vat_gst_id})),p(m.yy({legalName:k.customer_legal_name||k.company_name,displayName:k.display_name})),p(m.Ef({regionalVatGstId:k.regional_vat_gst_id})),a({address:k.address,editor_status_changes:d.editorStatusChanges,figma_email_team_users:l,selected_currency:k.currency,annual_quantity:(0,S.fD)(e,c),monthly_quantity:(0,S.Rq)(e,c),annual_whiteboard_quantity:(0,S.fD)(e,u),monthly_whiteboard_quantity:(0,S.Rq)(e,u),vat_gst_id:k.vat_gst_id,regional_vat_gst_id:k.regional_vat_gst_id,promotion_code_id:t,...n})}else x(!1)}else x(!1)}},[p,I,y,O,e,N,R,k,v,P,t,r]),(0,a.useEffect)(()=>()=>{e&&f(p,e)},[p,e]),R}),f=(0,E.D)((e,t)=>{let r=_.Xw.loadingKeyForPayload({teamId:t});e(p.yH({key:r}))});function D(e){e(m.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[]}}})),e(m.js({numDesignEditors:0})),e(m.Az({numWhiteboardEditors:0}))}},162707:(e,t,r)=>{r.d(t,{b:()=>o,k:()=>d});var a=r(411855),s=r(946689),n=r(939863),i=r(501114),l=r(396754);let d=443==r.j?["","",""]:null;function o({disableInvites:e,collaborators:t,setCollaborators:r,willSendInvites:d,skipInviteStep:o}){let c=(e,a)=>{if(a>=t.length)return;let s=[...t];s[a]=e,r(s)};return a.createElement(a.Fragment,null,a.createElement("div",{className:l.Fb},a.createElement(n.Tx,{id:"pro_cart.add_collaborators.add_collaborators_to_your_team"})),a.createElement(s.Kz,{multiple:.5}),a.createElement("div",{className:l.b0},a.createElement(n.Tx,{id:"pro_cart.add_collaborators.well_add_them_to_your_team"})),a.createElement(s.Kz,{multiple:4}),a.createElement("div",{style:i.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>a.createElement(s.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>c(e.target.value,t),placeholder:(0,n.t)("pro_cart.add_collaborators.email")})),a.createElement(s.Us,{onClick:()=>{let e=[...t];e.push(""),r(e)},trusted:!0,style:i.sx.alignLeft.font14.fontMedium.$},a.createElement(n.Tx,{id:"pro_cart.add_collaborators.add_another"}))),a.createElement("div",{style:i.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},a.createElement(s.vd,{disabled:!!e,style:i.sx.font14.add({height:"44px",width:"110px"}).$,onClick:d},a.createElement(n.Tx,{id:"pro_cart.add_collaborators.sent_invites"})),a.createElement(s.Ph,{trusted:!0,onClick:o,style:i.sx.colorTextSecondary.alignCenter.$},a.createElement(n.Tx,{id:"pro_cart.add_collaborators.skip_for_now"}))))}},720608:(e,t,r)=>{let a;r.d(t,{kR:()=>y,vU:()=>v});var s=r(411855),n=r(188507),i=r(935283),l=r(966712),d=r(48793),o=r(939863),c=r(738269),u=r(507877),p=r(101505),m=r(672517),_=r(195971),b=r(860178),h=r(257512),E=r(622139),g=r(637590),A=r(396754);function T(e){return s.createElement(m.$z,{type:"button",className:A.Nd,trackingProperties:{trackingDescriptor:p.c.CANCEL},onClick:e.onClick},s.createElement(o.Tx,{id:"pro_cart.breadcrumbs.cancel"}))}var C=((a=C||{})[a.PLAN_COMPARISON=0]="PLAN_COMPARISON",a[a.CREATE_TEAM=1]="CREATE_TEAM",a[a.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",a[a.ADJUST_EDITORS=3]="ADJUST_EDITORS",a[a.SET_EDITORS=4]="SET_EDITORS",a[a.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",a[a.CONFIRM_PAY=6]="CONFIRM_PAY",a);function S(e,t,r,a){let s=t===E.tY.STUDENT,n=[];switch(e){case g.SC.CREATE_AND_UPGRADE:n.push(0),n.push(1),s?n.push(4):r||(n.push(4),n.push(5)),n.push(6);break;case g.SC.UPGRADE_EXISTING_TEAM:a===g.Sc.TEAM?(n.push(3),s||n.push(5)):s?(n.push(0),n.push(3)):r?n.push(0):(n.push(0),n.push(4),n.push(5)),n.push(6);break;case g.SC.CREATE:n.push(1),n.push(2),n.push(0),a===g.Sc.TEAM&&(s?n.push(4):r||(n.push(4),n.push(5)),n.push(6));break;default:(0,i.xb)(e)}return n.map(e=>(function(e){switch(e){case 0:return{step:E.tn.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:E.tn.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:E.tn.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:E.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:E.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:E.tn.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:E.tn.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function y(e,t,r,a,s,n){let i=S(t,r,a,s).map(e=>e.step),l=i.indexOf(e);return n=n||i[0],-1===l?n:i[l+1]}function v(e){var t;let{selectedView:r}=e,{teamId:a,paymentStep:i,teamFlowType:o}=r,p=(0,n.wA)(),m=(0,n.d4)(e=>e.payment.billingPeriod),C=null==(t=(0,b.iZ)())?void 0:t.id,y=S(o,m,(0,n.d4)(e=>e.payment.promo),e.selectedView.planType||g.Sc.UNDETERMINED),v=y.findIndex(e=>e.step===i);return s.createElement("div",{className:A.N6},s.createElement(T,{onClick:()=>{var e;((0,l.sj)(),(0,h.Mt)(p),(0,g.h5)(o)&&null===a&&(0,_.Al)(C),(0,l.kc)().ps_benchmark&&C)?a?p(u._l({workspace:{userId:C,teamId:a,orgId:null},view:{view:"recentFiles"}})):p(c.$T(r.previousView||{view:"recentFiles"})):p(c.$T(r.previousView||(a?{view:"team",teamId:a}:{view:"recentFiles"}))),null==(e=r.callbackOnClose)||e.call(r)}}),y.map((e,t)=>s.createElement(d.On,{key:e.text,selected:i===e.step,number:t+1,text:e.text,canClick:t<v,lightText:!0,onClick:()=>{p(c.$T({...r,paymentStep:e.step,billingPeriod:m===E.tY.UNSPECIFIED?void 0:m,planType:(0,g.ck)(o,e.step)?g.Sc.UNDETERMINED:r.planType,teamFlowType:(0,g.jX)(o)&&e.step===E.tn.PLAN_COMPARISON?g.SC.CREATE_AND_UPGRADE:r.teamFlowType}))}})))}},848044:(e,t,r)=>{r.d(t,{I:()=>s});var a=r(411855);class s extends a.Component{render(){return a.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},a.createElement("div",{className:"persisted_error--sideBar--C-abH"}),a.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},48793:(e,t,r)=>{r.d(t,{On:()=>n,Kh:()=>d,JR:()=>l});var a=r(411855),s=r(935283);class n extends a.PureComponent{render(){(0,s.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,s.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+="step_breadcrumb--stepSelected--aaq-4 step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--whiteText--TeOgy")):(e+="step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--greyText--Xid8Q")),this.props.canClick&&(this.props.lightText?e+=" step_breadcrumb--stepClickableLight--e7tX-":e+=" step_breadcrumb--stepClickable--t001q step_breadcrumb--step--h0dTR step_breadcrumb--stepClickable-on-hover---oTm4"),a.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},a.createElement("span",{className:"step_breadcrumb--stepNumber--0A5tz"},String.fromCharCode(9311+this.props.number)),this.props.text)}}n.displayName="StepBreadcrumb";class i extends a.PureComponent{render(){return a.createElement("div",{className:"step_breadcrumb--stepBreadcrumbSpacer--baFNr"})}}i.displayName="StepBreadcrumbSpacer";class l extends a.PureComponent{render(){return a.createElement("div",{className:`step_breadcrumb--stepTitle--kyggE text--fontPos22--4H4Fc text--_fontBase--QdLsd ${this.props.className||""}`},this.props.children)}}l.displayName="StepTitle";class d extends a.PureComponent{render(){return a.createElement("div",{className:"step_breadcrumb--stepInstructions--gjSRc text--fontPos14--OL9Hp text--_fontBase--QdLsd",...this.props})}}d.displayName="StepInstructions"}}]);

//# debugId=2976e3e3-485c-59bd-a1d7-2d2f47b76c3d

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/11ae9b10a724f53295c1ae36d3a585e04669fef5/1497-7818d6dfff895843.min.js.map